const DEFAULT_PATTERN = /\w+/;
// https://html.spec.whatwg.org/#valid-e-mail-address
const EMAIL_PATTERN = /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;
const PW_PATTERN = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,}$/;
const isEmpty = ({ value, type, checked }) => {
    if (type === ('checkbox' || 'radio')) {
        return !checked;
    }
    if (Array.isArray(value)) {
        value = value.find((v) => v !== '')?.length;
    }
    return !value;
};
const isValidPattern = (val, type, pattern) => {
    let obj = {
        error: false,
        message: '',
    };
    const objError = {
        error: true,
        message: `please enter a valid format`,
        code: 'VALIDATION_ERROR',
    };
    if (type === 'email' && !val.match(pattern || EMAIL_PATTERN)) {
        obj = { ...obj, ...objError };
    }
    if (type === 'password' && !val.match(pattern || PW_PATTERN)) {
        obj = { ...obj, ...objError };
    }
    if (type === 'text' && !val.match(pattern || DEFAULT_PATTERN)) {
        obj = { ...obj, ...objError };
    }
    return obj;
};
const validateValue = (data) => {
    if (!data.required) {
        return {
            error: false,
            message: '',
        };
    }
    if (isEmpty(data)) {
        return {
            error: true,
            message: `${data.name} is required`,
            code: 'EMPTY_ERROR',
        };
    }
    return isValidPattern(data.value, data.type, data.pattern);
};
export default validateValue;
